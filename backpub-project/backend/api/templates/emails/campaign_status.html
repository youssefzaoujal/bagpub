{% extends 'emails/base.html' %}

{% block icon %}üìä{% endblock %}
{% block header_title %}Mise √† jour de votre commande{% endblock %}

{% block content %}
<div class="greeting">
    <p>Bonjour <strong>{{ client_name }}</strong>,</p>
</div>

<div class="content-section">
    <p>Le statut de votre commande <strong>"{{ campaign_name }}"</strong> a √©t√© mis √† jour.</p>
    
    <div class="info-box" style="background-color: #f8f9fa; border-left: 4px solid #A67C52; padding: 25px; border-radius: 8px; margin: 25px 0; text-align: center;">
        <div style="margin-bottom: 15px;">
            <span class="status-badge status-created">{{ old_status_label }}</span>
        </div>
        <div style="font-size: 24px; color: #A67C52; margin: 15px 0;">‚Üì</div>
        <div>
            <span class="status-badge status-{% if new_status == 'ASSIGNED_TO_PARTNER' %}assigned{% elif new_status == 'IN_PRINTING' %}printing{% elif new_status == 'PRINTED' %}printed{% elif new_status == 'IN_DISTRIBUTION' %}distribution{% elif new_status == 'DELIVERED' %}delivered{% elif new_status == 'FINISHED' %}finished{% else %}created{% endif %}">{{ new_status_label }}</span>
        </div>
    </div>

    <h2>üì¶ D√©tails de votre commande</h2>
    
    <div class="content-section">
        <div class="info-row">
            <span class="info-label">Num√©ro de commande: </span>
            <span class="info-value">#{{ order_number }}</span>
        </div>
        <div class="info-row">
            <span class="info-label">Nom de la commande: </span>
            <span class="info-value">{{ campaign_name }}</span>
        </div>
        <div class="info-row">
            <span class="info-label">Quantit√©: </span>
            <span class="info-value">{{ quantity }} sacs</span>
        </div>
        {% if postal_codes %}
        <div class="info-row">
            <span class="info-label">Codes postaux: </span>
            <span class="info-value">{{ postal_codes }}</span>
        </div>
        {% endif %}
    </div>

    {% if new_status == 'ASSIGNED_TO_PARTNER' %}
    <div class="alert-box alert-info">
        <p><strong>ü§ù Partenaire assign√©</strong></p>
        <p style="margin-top: 10px;">Votre commande a √©t√© assign√©e √† un partenaire qui s'occupera de la distribution. Vous recevrez bient√¥t les coordonn√©es de votre partenaire.</p>
    </div>
    {% elif new_status == 'IN_PRINTING' %}
    <div class="alert-box alert-warning">
        <p><strong>üñ®Ô∏è Impression en cours</strong></p>
        <p style="margin-top: 10px;">Vos cartes sont maintenant en cours d'impression. Nos √©quipes travaillent pour vous garantir une qualit√© optimale. Vous recevrez une notification lorsque l'impression sera termin√©e.</p>
    </div>
    {% elif new_status == 'PRINTED' %}
    <div class="alert-box alert-success">
        <p><strong>‚úÖ Impression termin√©e</strong></p>
        <p style="margin-top: 10px;">Vos cartes ont √©t√© imprim√©es avec succ√®s ! Elles seront bient√¥t distribu√©es dans les zones s√©lectionn√©es.</p>
    </div>
    {% elif new_status == 'IN_DISTRIBUTION' %}
    <div class="alert-box alert-info">
        <p><strong>üöö Distribution en cours</strong></p>
        <p style="margin-top: 10px;">Votre commande est maintenant en cours de distribution. Les sacs seront bient√¥t livr√©s dans les zones s√©lectionn√©es.</p>
    </div>
    {% elif new_status == 'DELIVERED' %}
    <div class="alert-box alert-success">
        <p><strong>üì¶ Commande livr√©e</strong></p>
        <p style="margin-top: 10px;">Excellent ! Votre commande a √©t√© livr√©e avec succ√®s. Les sacs ont √©t√© distribu√©s dans les zones s√©lectionn√©es.</p>
    </div>
    {% elif new_status == 'FINISHED' %}
    <div class="alert-box alert-success">
        <p><strong>üéâ Commande termin√©e</strong></p>
        <p style="margin-top: 10px;">F√©licitations ! Votre commande est termin√©e. Tous les sacs ont √©t√© distribu√©s avec succ√®s. Nous esp√©rons que cette campagne vous apportera de nouveaux clients !</p>
    </div>
    {% endif %}

    <div class="button-container">
        <a href="{{ dashboard_url }}" class="button">Suivre ma commande</a>
    </div>

    <div class="content-section">
        <p><strong>Des questions ?</strong></p>
        <p>Contactez-nous √† <a href="mailto:support@bagpub.com" style="color: #A67C52;">support@bagpub.com</a> si vous avez des questions sur l'avancement de votre commande.</p>
    </div>

    <p style="margin-top: 30px;">Cordialement,<br><strong>L'√©quipe BagPub</strong></p>
{% endblock %}
